<?xml version="1.0" encoding="utf-8"?>

<Page
    x:Class="CroomsBellSchedule.UI.Views.Settings.PersonalizationView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    xmlns:ui="using:CommunityToolkit.WinUI"
    mc:Ignorable="d" Loaded="Page_Loaded">

    <ScrollViewer>
        <StackPanel
            x:Name="ContentArea">
            <Grid Margin="0,0,10,0">
                <TextBlock Margin="0, 20, 0, 26" Style="{ThemeResource TitleTextBlockStyle}"
            Text="Personalization" />
                <HyperlinkButton Margin="0,4,0,0" Content="Report a bug" 
                                 HorizontalAlignment="Right"
                                 VerticalAlignment="Center"
                                 NavigateUri="https://docs.google.com/forms/d/e/1FAIpQLSfGggFDrvK-qi6ABCiBDFG6ZVaTc6AvLMNHAvQeWFPAd1YOdw/viewform?usp=header" />

            </Grid>
           
            <TextBlock Margin="0,2,0,0" Style="{ThemeResource SubtitleTextBlockStyle}" Text="Appearance" />
            <controls:SettingsCard Description="Change the base color scheme of the Crooms Bell Schedule App"
                   Header="Choose your mode" Margin="0,7,0,0"
                   HeaderIcon="{ui:FontIcon Glyph=&#xE793;}">
                <ComboBox x:Name="ThemeCombo" SelectionChanged="ThemeCombo_SelectionChanged" CornerRadius="5">
                    <ComboBox.Items>
                        <ComboBoxItem Content="System"/>
                        <ComboBoxItem Content="Light"/>
                        <ComboBoxItem Content="Dark"/>
                    </ComboBox.Items>
                </ComboBox>
            </controls:SettingsCard>

            <controls:SettingsCard Header="Background"
                                   Description="Choose a variety of backgrounds to give the Crooms Bell Schedule more personality. Works best on dark mode."
                                   Margin="0,7,0,0"
                                   HeaderIcon="{ui:FontIcon Glyph=&#xEB9F;}">
                <Button Content="Select">
                    <Button.Flyout>
                        <Flyout>
                            <controls:UniformGrid Columns="4" x:Name="ThemesContainer"/>
                        </Flyout>
                    </Button.Flyout>
                </Button>
            </controls:SettingsCard>

            <controls:SettingsCard Description="Put the bell schedule in your Windows Taskbar. To exit from this mode, find the Crooms Bell Schedule Icon in the right area of your taskbar."
                               Header="Show inside of taskbar" Margin="0,7,0,0" CornerRadius="5"
                                   HeaderIcon="{ui:FontIcon Glyph=&#xEE64;}">
                <ToggleSwitch x:Name="chkTaskbar" Header="" Toggled="chkTaskbar_Toggled"
                          ToolTipService.ToolTip="Puts the bell schedule inside of the taskbar to avoid wasting space on your screen. Compatible with Windows 10 and 11." />
            </controls:SettingsCard>


            <controls:SettingsCard Description="Change font size. Setting is ignored in taskbar mode."
                               Header="Font size" Margin="0,7,0,0" CornerRadius="5"
                               HeaderIcon="{ui:FontIcon Glyph=&#xE8D2;}">
                <Slider x:Name="sliderFont" Minimum="16" Maximum="512" Header="" ValueChanged="sliderFont_ValueChanged"
                          ToolTipService.ToolTip="Puts the bell schedule inside of the taskbar to avoid wasting space on your screen. Compatible with Windows 10 and 11." />
            </controls:SettingsCard>


            <controls:SettingsCard Description="Change how many digits are shown"
       Header="Percentage" Margin="0,7,0,0" CornerRadius="5" HeaderIcon="{ui:FontIcon Glyph=&#xE94C;}">
                <ComboBox x:Name="ComboPercentage" SelectedItem="2" SelectionChanged="ComboPercentage_SelectionChanged">
                    <ComboBox.Items>
                        <ComboBoxItem>Hide</ComboBoxItem>
                        <ComboBoxItem>2 digit places (59%)</ComboBoxItem>
                        <ComboBoxItem>3 digit places (59.3%)</ComboBoxItem>
                        <ComboBoxItem>4 digit places (59.32%) (default)</ComboBoxItem>
                    </ComboBox.Items>
                </ComboBox>
            </controls:SettingsCard>

            <TextBlock Margin="0,10,0,5" Style="{ThemeResource SubtitleTextBlockStyle}" Text="Bell schedule" />
            <controls:SettingsCard Header="5th Period Lunch" Description="Lunch for all 7, activity and odd block days" Margin="0,7,0,0" CornerRadius="5">
                <StackPanel Orientation="Horizontal">
                    <ToggleButton x:Name="p5LunchA" Margin="5" Checked="p5LunchA_Checked" Unchecked="Lunch_Unchecked">A</ToggleButton>
                    <ToggleButton x:Name="p5LunchB" Margin="5" Checked="p5LunchB_Checked" Unchecked="Lunch_Unchecked">B</ToggleButton>
                </StackPanel>
            </controls:SettingsCard>
            <controls:SettingsCard Header="Homeroom Lunch" Description="Lunch for even block days/Wednesdays" Margin="0,7,0,0" CornerRadius="5">
                <StackPanel Orientation="Horizontal">
                    <ToggleButton x:Name="pHLunchA" Margin="5" Checked="pHLunchA_Checked" Unchecked="Lunch_Unchecked">A</ToggleButton>
                    <ToggleButton x:Name="pHLunchB" Margin="5" Checked="pHLunchB_Checked" Unchecked="Lunch_Unchecked">B</ToggleButton>
                </StackPanel>
            </controls:SettingsCard>

            <controls:SettingsCard Header="Change class names" ActionIcon="{ui:SymbolIcon Symbol=Go}" IsActionIconVisible="True" Margin="0,7,0,0" IsClickEnabled="True" CornerRadius="5" Click="GoToSchedule_Click">
                
            </controls:SettingsCard>
            
            <TeachingTip x:Name="ToggleThemeTeachingTip1"
    Target="{x:Bind chkTaskbar}"
    Title="Tip"
    Subtitle="To exit taskbar mode in the future, access the settings in the tray.">
                <TeachingTip.HeroContent>
                    <Image Source="/Assets/Settings/teach1.png" AutomationProperties.Name="Taskbar Image with Crooms Bell Schedule icon" />
                </TeachingTip.HeroContent>
            </TeachingTip>

            <TextBlock Margin="0,10,0,5" Style="{ThemeResource SubtitleTextBlockStyle}" Text="Behavior" />
            <controls:SettingsCard Header="Start when Windows starts" CornerRadius="5" Description="Automatically open the Crooms Bell Schedule app when Windows starts." Margin="0,7,0,0"
                                    HeaderIcon="{ui:FontIcon Glyph=&#xE7E8;}">
                <ToggleSwitch x:Name="chkStartup" Toggled="chkStartup_Checked"></ToggleSwitch>
            </controls:SettingsCard>

            <controls:SettingsCard Header="5-Minute notification" Description="Show 5 minutes remaining notification" Margin="0,7,0,0" CornerRadius="5"
                                   HeaderIcon="{ui:FontIcon Glyph=&#xE7E7;}">
                <ToggleSwitch x:Name="chk5MinNotif" Toggled="chk5MinNotif_Checked"></ToggleSwitch>
            </controls:SettingsCard>
            <controls:SettingsCard Header="1-Minute notification" Description="Show 1 minute remaining notification" Margin="0,7,0,0" CornerRadius="5"
                                   HeaderIcon="{ui:FontIcon Glyph=&#xE7E7;}">
                <ToggleSwitch x:Name="chk1MinNotif" Toggled="chk5MinNotif_Checked"></ToggleSwitch>
            </controls:SettingsCard>
            <controls:SettingsCard Header="DVD Screensaver" CornerRadius="5" Description="Make the bell schedule window move around on the screen. Only works when taskbar mode is disabled. NOTE: This increases CPU usage and decreases battery life."  Margin="0,7,0,0"
                                   HeaderIcon="{ui:FontIcon Glyph=&#xEA4F;}">
                <ToggleSwitch x:Name="chkDvd" Toggled="chkDvd_Toggled"></ToggleSwitch>
            </controls:SettingsCard>

            <controls:SettingsCard Header="Crooms Bell Schedule Insider Program" CornerRadius="5" Description="Changes the type of updates that you get. Stable - Updates that are confirmed to work well. Beta - Updates which are not really tested but released more frequently (Currently unavailable). Private Beta - Upcoming application rewrite. Requires access code from Mikhail Tyukin. Warning: access code cannot be changed without deleting the application."  Margin="0,7,0,0"
                            HeaderIcon="{ui:FontIcon Glyph=&#xEA4F;}">
                <ComboBox x:Name="chkInsider" SelectionChanged="chkInsider_SelectionChanged">
                    <ComboBox.Items>
                        <ComboBoxItem Content="Stable (default)"/>
                        <ComboBoxItem Content="Private Beta"/>
                    </ComboBox.Items>
                </ComboBox>
            </controls:SettingsCard>

            <controls:SettingsCard Header="App version" Description="Loading" x:Name="VersionCard" Margin="0,7,0,0" CornerRadius="5"
                                   HeaderIcon="{ui:FontIcon Glyph=&#xED35;}">
                <StackPanel Orientation="Horizontal">
                    <Button x:Name="ButtonCheckForUpdates" Click="ButtonCheckForUpdates_Click">Check for updates</Button>
                </StackPanel>
            </controls:SettingsCard>

            <TextBlock Style="{ThemeResource SubtitleTextBlockStyle}" Text="Credits / About" Margin="4,15,0,0" />

            <StackPanel Margin="4,8,0,5">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                    </Grid.RowDefinitions>

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto"/>
                        <ColumnDefinition Width="auto"/>
                        <ColumnDefinition Width="auto"/>
                    </Grid.ColumnDefinitions>

                    <PersonPicture Grid.Row="0" Grid.Column="0" Height="48" ProfilePicture="/Assets/Settings/mikhail.png" Margin="0,10,0,0"/>
                    <TextBlock Grid.Row="0" Grid.Column="1" FontSize="16" Text="Mikhail Tyukin" VerticalAlignment="Center" FontWeight="Bold" Margin="10,10,0,0"/>
                    <TextBlock Grid.Row="0" Grid.Column="2" Text="Creator of the new Crooms Bell Schedule Application/MikhailHosting" VerticalAlignment="Center" Margin="15,10,0,0"/>

                    <PersonPicture Grid.Row="1" Grid.Column="0" Height="48" ProfilePicture="/Assets/Settings/andrew.png" Margin="0,10,0,0"/>
                    <TextBlock Grid.Row="1" Grid.Column="1" FontSize="16" Text="Andrew Jennings" VerticalAlignment="Center" FontWeight="Bold" Margin="10,10,0,0"/>
                    <TextBlock Grid.Row="1" Grid.Column="2" Text="Creator of the Crooms Bell Schedule website and backend." VerticalAlignment="Center" Margin="15,10,0,0"/>

                    <PersonPicture Grid.Row="2" Grid.Column="0" Height="48" ProfilePicture="/Assets/Settings/suvan.png" Margin="0,10,0,0"/>
                    <TextBlock Grid.Row="2" Grid.Column="1" FontSize="16" Text="Suvan Mangamuri" VerticalAlignment="Center" FontWeight="Bold" Margin="10,10,0,0"/>
                    <TextBlock Grid.Row="2" Grid.Column="2" Text="Helped out with UI design in the CBSH app and some other things." VerticalAlignment="Center" Margin="15,10,0,0"/>

                    <PersonPicture Grid.Row="3" Grid.Column="0" Height="48" ProfilePicture="/Assets/Settings/anish.png" Margin="0,10,0,0"/>
                    <TextBlock Grid.Row="3" Grid.Column="1" FontSize="16" Text="Anish Miryala" VerticalAlignment="Center" FontWeight="Bold" Margin="10,10,0,0"/>
                    <TextBlock Grid.Row="3" Grid.Column="2" Text="Discord Certified Moderator as well as a wonderful Prowler moderator." VerticalAlignment="Center" Margin="15,10,0,0"/>

                    <PersonPicture Grid.Row="4" Grid.Column="0" Height="48" ProfilePicture="/Assets/Settings/zane.png" Margin="0,10,0,0"/>
                    <TextBlock Grid.Row="4" Grid.Column="1" FontSize="16" Text="Zane DeReamer" VerticalAlignment="Center" FontWeight="Bold" Margin="10,10,0,0"/>
                    <TextBlock Grid.Row="4" Grid.Column="2" Text="Nothing?" VerticalAlignment="Center" Margin="15,10,0,0"/>
                </Grid>
                <TextBlock Style="{ThemeResource BodyTextBlockStyle}" TextWrapping="Wrap" Padding="0,15,0,0">
                    This application uses the following libraries:
                    <LineBreak/>Microsoft WinUI 3.0, HtmlAgilityPack, System.Text.Json, Velopack for update system and H.NotifyIcon.WinUI for tray icon.
                    <LineBreak/>This application is licensed under the GNU GPL v3 License.
                </TextBlock>

                <controls:WrapPanel Orientation="Horizontal" HorizontalSpacing="5">
                    <HyperlinkButton Margin="0,4,0,0" Content="Changelog" Click="Changelog_Click" />
                    <HyperlinkButton Margin="0,4,0,0" Content="Source code" NavigateUri="https://github.com/Crooms-Bell-Schedule/CroomsBellScheduleWinUI3" />
                </controls:WrapPanel>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</Page>